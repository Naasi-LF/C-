## 第8章 善于利用指针

**+ 2.0 分**

1 . ` 单选题` `简单` `2分`

```c
若要对a进行合法的自减运算，则之前应有下面（ ）的说明。

A.int p[3];    int *a=p;

B.int k; int *a=&k;

C.char *a[3]

D.int b[10];    int *a=b+1;✅

回答正确
```

**解析**

A选项中a—已经超过**数组下标下限**，此时a不一定指向可以合法访问的整型对象；B选项a—指向的对象也未知，不一定是合法访问的整型对象；C选项中**a是数组名，不允许修改**。

**老师点评**

暂无评语

**+ 3.0 分**

2 . ` 单选题` `中等` `3分`

```c
设int x[]={1, 2, 3, 4, 5, 6, 7, 8, 9, 0},*p=x,k;且0≤k<10, 则对数组元素x[k]的错误引用是（ ）。

A.p+k✅

B.*(x+k)

C.x[p-x+k]

D.*(&x[k])
```

回答正确

**解析**

A选项为x[k]的地址。

**老师点评**

暂无评语

**+ 5.0 分**

3 . ` 单选题` `中等` `5分`

下面程序执行后的输出结果是（ ）。

```c
#include <stdio.h>
void fun( int a[] )
{
	a[0] = a[-1] + a[1];
}


int main()
{
	int a[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
	fun( &a[2] );
	printf( "%d", a[2] );
	return(0);
}
```

A.6✅

B.7

C.8

D.9

回答正确

**解析**

fun(&a[2])将main函数中a数组中a[2]的地址传入fun函数中，因此fun函数中a数组的a[0]其实是main函数中a数组的a[2]。

**老师点评**

暂无评语

**+ 5.0 分**

4 . ` 单选题` `中等` `5分`

下面程序执行后的输出结果是（ ）。

```c
#include <stdio.h>
int b = 2;
int func( int *a )
{
	b += *a; return(b);
}

int main()
{
	int a = 2, res = 2;
	res += func( &a );
	printf( "%d", res );
	return(0);
}
```

A.4

B.6✅

C.8

D.10

回答正确

**解析**

fun(&a)将main函数中a变量的地址传入fun函数中，因此fun函数中b+= *a;执行后使得b的值变为4,并返回到main中。

**老师点评**

暂无评语

**+ 3.0 分**

5 . ` 单选题` `中等` `3分`

```c
已有定义int k=2;int *ptr1,*ptr2;且ptr1和ptr2均已指向变量k，下面不能正确执行的赋值是（ ）。

A.k=*ptr1+*ptr2

B.ptr2=k✅

C.ptr1=ptr2

D.k=*ptr1*(*ptr2)
```

回答正确

**解析**

由于指针数据的特殊性，其初始化和赋值运算是有约束条件的，只能使用以下四种值：0值常量表达式、相同指向类型的对象的地址、对象存储空间后面下一个有效地址、相同指向类型的另一个有效指针。不能赋值为任意的整数，因此B选项赋值错误。

**老师点评**

暂无评语

**+ 2.0 分**

6 . ` 单选题` `简单` `2分`

```c
若有定义int *p,m=5,n;以下程序段正确的是（ ）。

A.p=&n; scanf("%d",&p);

B.p=&n ; scanf("%d",*p);

C.scanf("%d",&n); *p=n ;//野指针

D.p=&n; *p=m;✅
```

回答正确

**解析**

A，B选项中scanf函数的输入项要求给出某个整型变量的地址，因此可以是p，不能是&p或*p；C选项中p指针还没有指向任何对象时，不能使用*运算符引用它所指的对象。

**老师点评**

暂无评语

**+ 3.0 分**

7 . ` 单选题` `中等` `3分`

```c
若程序中已包含头文件stdio.h，以下选项中正确运用指针变量的程序段是（ ）。

A.int *i=NULL; scanf("%d",i);

B.float *f=NULL; *f=10.5;

C.char t='m',*c=&t; *c=&t;

D.long *L; L='\0';✅
```

回答正确

**解析**

A，B选项中指针指向为NULL，即没有指向任何对象，因此不能通过该指针操作它所指向的对象；C选项中*c代表取c指针所指向的对象，不能对它赋值地址值。

**老师点评**

暂无评语

**+ 2.0 分**

8 . ` 单选题` `简单` `2分`

```c
若有定义 char s[10];则在下面表达式中不表示s[1]的地址的是（ ）。

A.s+1

B.s++✅

C.&s[0]+1//指针+1==地址+1==下一个元素

D.&s[1]
```

回答正确

**解析**

C语言规定，数组名既代表数组对象，又是数组首元素的地址值，即a与第0个元素的地址&a[0]相同。是一个指针常量，因而它不能出现在左值和某些算术运算中。

**老师点评**

暂无评语

**+ 2.0 分**

9 . ` 单选题` `简单` `2分`

```c
若有定义int a[5],*p=a;则对a数组元素的正确引用是（ ）。

A.*&a[5]

B.a+2

C.*(p+5)

D.*(a+2)✅
```

回答正确

**解析**

A和C选项数组越界，B选项是a[2]的地址，而不是a[2]元素本身。

**老师点评**

暂无评语

**+ 2.0 分**

10 . ` 单选题` `简单` `2分`

```c
设double *p[6];则（ ）。

A.p是指向double型变量的指针

B.p是double型数组

C.p是指针数组，其元素是指向double型变量的指针✅

D.p是数组指针，指向double型数组
    //double （*p）[6]
```

回答正确

**解析**

**由于（[ ]）比（*）优先级高**，因此先处理（[ ]），显然这是数组形式。指针数组每个元素均是一个（指向类型 *）的指针类型，即每个元素相当于一个指针变量。

**老师点评**

暂无评语

**+ 4.0 分**

11 . ` 单选题` `中等` `4分`

```c
若有定义int x[6]={2,4,6,8,5,7},*p=x,i;要求依次输出x数组6个元素中的值，不能完成此操作的语句是（ ）。

A.for(i=0;i <6;i++) printf("%2d",*(p++));

B.for(i=0;i <6;i++) printf("%2d",*(p+i));

C.for(i=0;i <6;i++) printf("%2d",*p++);

D.for(i=0;i <6;i++) printf("%2d",(*p)++);✅
```

回答正确

**解析**

D选项实现将数组元素x[0]多次加1依次输出的效果。

**老师点评**

暂无评语

**+ 5.0 分**

12 . ` 单选题` `中等` `5分`

下面程序执行后的输出结果是（ ）。

```c
#include <stdio.h>
int main()
{
	int a[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }, *p = &a[3], *q = p + 2;
	printf( "%d", *p + *q );
	return(0);
}
```

A.16

B.10✅

C.8

D.6

回答正确

**解析**

*p相当于a[3]，*q相当于a[5]。

**老师点评**

暂无评语

**+ 3.0 分**

13 . ` 单选题` `中等` `3分`

```c
下面判断正确的是（ ）。

A.char *a="china"; 等价于 char *a; *a="china" ;

B.char str[10]={"china"}; 等价于 char str[10]; str[]={"china";}

C.char *s="china"; 等价于 char *s; s="china" ;✅

D.char c[4]="abc",d[4]="abc"; 等价于 char c[4]=d[4]="abc" ;
```

回答正确

**解析**

A选项中，*a相当于一个字符对象，只能赋值字符信息；B、D选项中**不能数组整体赋值**。

**老师点评**

暂无评语

**+ 3.0 分**

14 . ` 单选题` `中等` `3分`

```c
下面能正确给字符串s赋值的是（ ）。

A.char s[6]="ABCDE";✅

B.char s[5]={'A','B','C','D','E'} ;

C.char s[6] ; s="ABCDE";

D.char *s; scanf("%s",s);
```

回答正确

**解析**

B选项中没有字符串结束标记；C选项中**不能数组整体赋值**；D选项中s指针并没有指向一个分配好的字符串存储空间，因此无法接受输入内容。

**老师点评**

暂无评语

**+ 3.0 分**

15 . ` 单选题` `中等` `3分`

```c
若有程序段char s[]="china"; char *p ; p=s ;以下叙述中正确的是（ ）。

A.s和p完全相同

B.数组s中的内容和指针变量p中的内容相等

C.*p与s[0]相等✅

D.s数组长度和p所指向的字符串长度相等//6 5
```

回答正确

**解析**

s为数组名，保存字符c的地址，不能更改；p为指针，可以改变；数组s中包括的字符串china，指针变量p中保存的是字符串的首地址；s数组的长度为6，因为字符串结束符也占据存储空间，p所指的字符串的长度为5，不计算字符串结束符。

**老师点评**

暂无评语

**+ 2.0 分**

16 . ` 单选题` `中等` `2分`

```c
若有定义char a[]="Itismine", *p="Itismine";以下叙述中错误的是（ ）。

A.a+1表示的是字符't'的地址

B.p不能再指向别的字符串常量✅

C.p变量中存放的地址值可以改变

D.a数组所占字节数为9
```

回答正确

**解析**

指针变量的值可以修改，但是p的值一旦修改后它所指的字符串常量将无法访问。

**老师点评**

暂无评语

**+ 3.0 分**

17 . ` 单选题` `简单` `3分`

```c
若有定义char *cc[2]={"1234","5678"};以下叙述中正确的是（ ）。

A.cc数组的两个元素中各自存放了字符串"1234"和"5678"的首地址✅

B.cc数组的两个元素分别存放的是含有4个字符的一维字符数组的首地址

C.cc是指针变量，它指向含有两个数组元素的一维字符数组

D.cc数组元素的值分别是"1234"和"5678"
```

回答正确

**解析**

cc是一个数组，其元素为指向字符串的指针。

**老师点评**

暂无评语

**+ 2.0 分**

18 . ` 单选题` `简单` `2分`

下面程序段执行后的输出结果是（ ）。

```c
char *s = "abcde";
s += 2;
printf( "%d", s );
```

A.cde

B.字符'c'

C.字符'c'的地址✅

D.不确定

回答正确

**解析**

s的值为字符c的地址，因此按照十进制输出该地址值。

**老师点评**

暂无评语

**+ 5.0 分**

19 . ` 单选题` `中等` `5分`

下面程序执行后的输出结果是（ ）。

```c
#include <stdio.h>
void fun( char *c, int d )
{
	*c = *c + 1; d = d + 1;
	printf( "%c,%c,", *c, d );
}

int main()
{
	char a = 'A', b = 'a';
	fun( &b, a ); printf( "%c,%c", a, b );
	return(0);
}
```

A.B,a,B,a

B.a,B,a,B

C.A,b,A,b

D.b,B,A,b✅

回答正确

**解析**

fun函数分别输出输入的两个字符的后继字符。

**老师点评**

暂无评语

**+ 4.0 分**

20 . ` 单选题` `中等` `4分`

以下函数的功能是（ ）。

```c
intfun( char *a, char *b )
{
	while ( (*a != '\0') && (*b != '\0') && (*a == *b) )
	{
		a++; b++;
	}
	return(*a - *b);
}
```

A.计算a和b所指字符串的长度之差

B.将b所指字符串连接到a所指字符串中

C.将a所指字符串连接到b所指字符串后面

D.比较a和b所指字符串的大小✅

回答正确

**解析**

*a,*b是a，b指针所指的字符串中的相应字符。

**老师点评**

暂无评语

**+ 4.0 分**

21 . ` 单选题` `中等` `4分`

```c
若有定义char *st="how are you";下列程序段中正确的是（ ）。

A.char a[11],*p; strcpy(p=a+1,&st[4]);✅

B.char a[11]; strcpy(++a, st);//数组不好a++,++a

C.char a[11]; strcpy(a, st);

D.char a[],*p; strcpy(p=&a[1],st+2);
```

回答正确

**解析**

字符串处理函数strcpy的两个参数都是字符型指针，完成将一个字符串复制到另一个字符串中。B选项中a为数组名，不能更改值；C选项中st所指的字符串中包括12个字符，数组a无法接收；D选项啊中字符数组a定义错误。

**老师点评**

暂无评语

**+ 2.0 分**

22 . ` 单选题` `简单` `2分`

```c
若有定义char a[10],*b=a;不能给数组a输入字符串的语句是（ ）。

A.gets(a);

B.gets(a[0]);✅

C.gets(&a[0]);

D.gets(b);
```

回答正确

**解析**

gets函数的参数为接收输入信息的字符串地址。

**老师点评**

暂无评语

**+ 5.0 分**

23 . ` 单选题` `中等` `5分`

下面程序执行后的输出结果是（ ）。

```c
#include <stdio.h>
#include <string.h>
void fun( char *s, int p, int k )
{
	int i;
	for ( i = p; i < k; i++ )
		*(s + i) = s[i + 2];
}

int main()
{
	char s[] = "abcdefg";
	fun( s, 3, strlen( s ) ); puts( s );
	return(0);
}
```

A.abcdefg

B.abc

C.defg

D.abcfg✅

回答正确

**解析**

函数fun的功能将字符串s从下标为3的字符开始用其后下标增加2的位置的字符替代。

**老师点评**

暂无评语

**+ 3.0 分**

24 . ` 单选题` `简单` `3分`

s1和s2已正确定义并分别指向两个字符串。若要求：当s1所指串大于s2所指串时，执行语句S;则以下选项中正确的是（ ）。

A.if(s1>s2) S;

B.if(strcmp(s1,s2)) S;

C.if(strcmp(s2,s1)>0) S;

D.if(strcmp(s1,s2)>0) S;✅

回答正确

**解析**

int strcmp(const char *s1, const char *s2);strcmp比较字符串s1和s2的大小。s1和s2可以是字符串常量、字符数组或指向字符数组的指针，比较结果为： ①若s1大于s2，返回大于0的整数值； ②若s1等于s2，返回0； ③若s1小于s2，返回小于0的整数值。

**老师点评**

暂无评语

**+ 4.0 分**

25 . ` 单选题` `中等` `4分`

```c
以下与库函数strcpy(char *p1,char *p2)功能不相等的程序段是（ ）。

A.strcpy1(char *p1,char *p2) { while ((*p1++=*p2++)!='\0') ; }

B.strcpy2(char *p1,char *p2) { while ((*p1=*p2)!='\0') { p1++; p2++ } }

C.strcpy3(char *p1,char *p2) { while (*p1++=*p2++) ; }

D.strcpy4(char *p1,char *p2) { while (*p2)  *p1++=*p2++ ; }✅
```

回答正确

**解析**

D选项**没有复制最后的字符串结束符**。

**老师点评**

暂无评语

**+ 5.0 分**

26 . ` 单选题` `中等` `5分`

下面程序执行后的输出结果是（ ）。

```c
#include <stdio.h>
#include <string.h>
int main()
{
	char b1[8] = "abcdefg", b2[8], *pb = b1 + 3;
	while ( --pb >= b1 )
		strcpy( b2, pb );
	printf( "%d", strlen( b2 ) );
	return(0);
}
```

A.8

B.7✅

C.3

D.1

回答正确

**解析**

while语句时将字符串b2进行了3赋值，最后一次将字符串b1赋给了b2，因此字符串b2的长度为7。

**老师点评**

暂无评语

**+ 3.0 分**

27 . ` 单选题` `中等` `3分`

若有定义char s1[]="string1",s2[8],*s3,*s4="string2";则对库函数strcpy错误调用的是（ ）。

A.strcpy(s1,"string2");

B.strcpy(s2,"string1");

C.strcpy(s3,"string1");✅

D.strcpy(s2,s1);

回答正确

**解析**

s3没有指向任何字符数组，没有存储字符串的存储空间。

**老师点评**

暂无评语

**+ 5.0 分**

28 . ` 单选题` `中等` `5分`

```c
以下与库函数strcmp(char *s,char *t)功能相等的程序段是（ ）。

A.strcmp1(char *s,char *t) {	for ( ; *s++==*t++; ) 		if (*s=='\0') return 0 ; 	return (*s-*t) ; }

B.strcmp2(char *s,char *t) {	for ( ; *s++==*t++; ) 		if (!*s) return 0 ; 	return (*s-*t) ; }

C.strcmp3(char *s,char *t) {	for ( ; *t==*s; ) 		{ if (!*t) return 0 ; t++ ; s++ ; } 	return (*s-*t) ; }✅

D.strcmp4(char *s,char *t) {	for ( ; *s==*t;s++,t++ ) 		if (!*s) return 0 ; 	return (*t-*s) ; }

```

**解析**

`int strcmp(const char *s1, const char *s2);`strcmp比较字符串s1和s2的大小。s1和s2可以是**字符串常量**、**字符数组**或**指向字符数组的指针**，比较结果为：

 ①若s1大于s2，返回大于0的整数值；

 ②若s1等于s2，返回0； 

 ③若s1小于s2，返回小于0的整数值。

**老师点评**

暂无评语

**+ 3.0 分**

29 . ` 填空题` `简单` `3分`

【提高题】若有定义double *p;请写出利用malloc函数使p指向一个双精度型的动态存储单元的完整语句为_p=(double*)malloc(sizeof(double))；__。

**解析**

无

**老师点评**

暂无评语

**+ 3.0 分**

30 . ` 单选题` `中等` `3分`

下面程序段执行后的输出结果是（ ）。

```c
char a[] = "language", *p;
p = a;
while ( *p != 'u' )
{
	printf( "%c", *p - 32 ); p++;
}
```

A.LANGUAGE

B.language

C.LANG✅

D.langUAGE

回答正确

**解析**

将u字符之前的字符小写转大写输出。

**老师点评**

暂无评语

1 . `编程题` `中等` `55分`

**指针实现报数退出**

采用指针的方式编程实现：

有m个人围成一圈，顺序排号，从第1个人开始报数（从1到n报数），凡报到n的人退出圈子，输出退出的顺序。

| 输入：                 |
| ---------------------- |
| 10 3                   |
| 输出：                 |
| Input integer m and n: |
| Exit in order:         |
| 3 6 9 2 7 1 8 5 10 4   |

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int m,k;
    scanf("%d %d",&m,&k);
    int data[101]={0};
    int right[101]={0};
    int book[101]={0};
    for (int i = 1; i <= m; i++)
      data[i]=i;
    for (int i = 0; i <= m; i++)
    {  
       if(i==m)
         right[m]=1;
       else
         right[i]=i+1;
    }
    int t=0;
    int* pr=right;
    while
         (
          (!book[1])||
          (!book[2])||(!book[3])||
          (!book[4])||(!book[5])||(!book[6])||
          (!book[7])||(!book[8])||(!book[9])||(!book[10])
         )
    {
      int i=k;//保护原数
      while(i--)//循环k次
      {
        while(book[*(pr+t)]==1)
          t=*(pr+t);
        t=*(pr+t);
      }
      printf("%d ",data[t]);
      //做标记
      book[t]=1;
    }    
    return 0;
}
```

2 . `编程题` `中等` `45分`

**指针实现源字符串字符分类存入目标字符串**

采用指针的方式编程实现：

编写函数void fun(char s1[ ], char s2[ ])，实现将字符串s1中的字符分别按**字母**、**数字**、**其他字符**的顺序放入字符串s2中。在main函数中输入字符串s1，输出字符串s2。﻿﻿

| 输入：            |
| ----------------- |
| 23Bca&%$789MNp??? |
| 输出：            |
| Input string S1:  |
| Output string S2: |
| BcaMNp23789&%$??? |

```c
#include<stdio.h>
#include<ctype.h>
void fun(char *s1, char *s2)//缩化成指针
{
    for (int i = 0 ; s1[i]!=0 ; i++)
        if(isalpha(s1[i]))
            *(s2++)=*(s1+i);

    for (int i = 0 ; s1[i]!=0 ; i++)
        if(isdigit(s1[i]))
            *(s2++)=*(s1+i);

    for (int i = 0 ; s1[i]!=0 ; i++)
        if(!isdigit(s1[i])&&!isalpha(s1[i]))
            *(s2++)=*(s1+i);
            
    *(s2++)=0;
}      
int main()
{
    char s1[100],s2[100];
    gets(s1);
    fun(s1,s2);
    puts(s2);
    return 0;
}
```
